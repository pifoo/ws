//: [Previous](@previous)
var str = "ğŸ’¡ğŸ•¯ğŸ“ğŸš©ğŸ“âœï¸ğŸ–â—ï¸â€¼ï¸â‰ï¸â•â”âŒâ­•ï¸ğŸ’¢â™¨ï¸"
/*:
    æœ¬é¡µåŒ…å«å†…å®¹ï¼š
    1. é—­åŒ…è¡¨è¾¾å¼ï¼ˆClosure Expressionsï¼‰
    2. å°¾éšé—­åŒ…ï¼ˆTrailing Closuresï¼‰
    3. å€¼æ•è·ï¼ˆCapturing Valuesï¼‰
    4. é—­åŒ…æ˜¯å¼•ç”¨ç±»å‹ï¼ˆClosures Are Reference Typesï¼‰
 */
/*:
    é—­åŒ…
    - è‡ªåŒ…å« çš„ å‡½æ•°ä»£ç å—ï¼Œå¯ä»¥åœ¨ä»£ç ä¸­ è¢«ä¼ é€’ å’Œ ä½¿ç”¨
    
    é—­åŒ…å¯ä»¥ æ•è·ï¼ˆcapturingï¼‰ å’Œ å­˜å‚¨ å…¶æ‰€åœ¨ ä¸Šä¸‹æ–‡ ä¸­ä»»æ„ å¸¸é‡ å’Œ å˜é‡ çš„ å¼•ç”¨
 
    é—­åŒ…é‡‡å–å¦‚ä¸‹ä¸‰ç§å½¢å¼ä¹‹ä¸€ï¼š
    - å…¨å±€å‡½æ•° æ˜¯ä¸€ä¸ª æœ‰åå­— ä½† ä¸ä¼šæ•è· ä»»ä½•å€¼ çš„ é—­åŒ…
    - åµŒå¥—å‡½æ•° æ˜¯ä¸€ä¸ª æœ‰åå­— å¹¶ å¯ä»¥æ•è· å…¶ å°é—­å‡½æ•°åŸŸå†…å€¼ çš„ é—­åŒ…
    - é—­åŒ…è¡¨è¾¾å¼ æ˜¯ä¸€ä¸ªåˆ©ç”¨è½»é‡çº§è¯­æ³•æ‰€å†™çš„ å¯ä»¥ æ•è· å…¶ ä¸Šä¸‹æ–‡ä¸­ å˜é‡   æˆ–å¸¸é‡å€¼ çš„  åŒ¿åé—­åŒ…
 
    Swift çš„ é—­åŒ…è¡¨è¾¾å¼ æ‹¥æœ‰ç®€æ´çš„é£æ ¼ï¼Œå¹¶é¼“åŠ±åœ¨å¸¸è§åœºæ™¯ä¸­è¿›è¡Œè¯­æ³•ä¼˜åŒ–ï¼Œä¸»è¦ä¼˜åŒ–å¦‚ä¸‹ï¼š
    - åˆ©ç”¨ ä¸Šä¸‹æ–‡ æ¨æ–­å‚æ•° å’Œ è¿”å›å€¼ç±»å‹
    - éšå¼è¿”å› å•è¡¨è¾¾å¼ é—­åŒ…ï¼Œå³ å•è¡¨è¾¾å¼é—­åŒ… å¯ä»¥ çœç•¥ return å…³é”®å­—
    - å‚æ•°åç§°ç¼©å†™
    - å°¾éšï¼ˆTrailingï¼‰é—­åŒ…è¯­æ³•
 */
//: ## 1. é—­åŒ…è¡¨è¾¾å¼ï¼ˆClosure Expressionsï¼‰
/*:
    é—­åŒ…è¡¨è¾¾å¼ æ˜¯ä¸€ç§åˆ©ç”¨ç®€æ´è¯­æ³•æ„å»ºå†…è”é—­åŒ…çš„æ–¹å¼
 */
/*:
    sort å‡½æ•°ï¼ˆThe Sort Functionï¼‰
 */
let names = ["Chris", "Alex", "Ewa", "Barry", "Daniella"]

// (é€†åº)æ’åºé—­åŒ… å‡½æ•°ç±»å‹éœ€ä¸º(String, String) -> Bool
func backwards(s1: String, s2: String) -> Bool {
    return s1 > s2
}
var reversed = names.sort(backwards)
/*:
    é—­åŒ…è¡¨è¾¾å¼è¯­æ³•ï¼ˆClosure Expression Syntaxï¼‰
 
    é—­åŒ…è¡¨è¾¾å¼è¯­æ³•æœ‰å¦‚ä¸‹ä¸€èˆ¬å½¢å¼ï¼š
        { (parameters) -> returnType in
            statements
        }
 
    - é—­åŒ…è¡¨è¾¾å¼è¯­æ³• å¯ä»¥ä½¿ç”¨ å¸¸é‡ã€å˜é‡ å’Œ inout ç±»å‹ä½œä¸ºå‚æ•°ï¼Œä¸æä¾›é»˜è®¤å€¼
    - å¯ä»¥åœ¨å‚æ•°åˆ—è¡¨çš„æœ€åä½¿ç”¨å¯å˜å‚æ•°ã€‚ å…ƒç»„ä¹Ÿå¯ä»¥ä½œä¸ºå‚æ•°å’Œè¿”å›å€¼
 */
// backwardså‡½æ•°å¯¹åº”çš„é—­åŒ…è¡¨è¾¾å¼ç‰ˆæœ¬çš„ä»£ç ï¼š
reversed = names.sort({ (s1: String, s2: String) -> Bool in // é—­åŒ…çš„å‡½æ•°ä½“éƒ¨åˆ†ç”±å…³é”®å­— in å¼•å…¥
    return s1 > s2
})
/*:
    æ ¹æ®ä¸Šä¸‹æ–‡æ¨æ–­ç±»å‹ï¼ˆInferring Type From Contextï¼‰
 
    é€šè¿‡å†…è”é—­åŒ…è¡¨è¾¾å¼æ„é€ çš„é—­åŒ…ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°æ—¶ï¼Œéƒ½ å¯ä»¥ æ¨æ–­å‡º é—­åŒ…çš„ å‚æ•° å’Œ è¿”å›å€¼ç±»å‹ï¼Œ
    è¿™æ„å‘³ç€æ‚¨å‡ ä¹ ä¸éœ€è¦ åˆ©ç”¨å®Œæ•´æ ¼å¼æ„é€ ä»»ä½•å†…è”é—­åŒ…
 */
reversed = names.sort( { s1, s2 in return s1 > s2 } )
/*:
    å•è¡¨è¾¾å¼é—­åŒ…éšå¼è¿”å›ï¼ˆImplicit Return From Single-Expression Clossuresï¼‰
 
    å•è¡Œè¡¨è¾¾å¼é—­åŒ… å¯ä»¥é€šè¿‡ éšè—return å…³é”®å­—æ¥ éšå¼è¿”å› å•è¡Œè¡¨è¾¾å¼çš„ç»“æœ
 */
reversed = names.sort( { s1, s2 in s1 > s2 } )
/*:
    å‚æ•°åç§°ç¼©å†™ï¼ˆShorthand Argument Namesï¼‰
 
    Swift è‡ªåŠ¨ä¸º å†…è”å‡½æ•° æä¾›äº†å‚æ•°åç§°ç¼©å†™åŠŸèƒ½ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡$0,$1,$2æ¥é¡ºåºè°ƒç”¨é—­åŒ…çš„å‚æ•°
    in å…³é”®å­—ä¹ŸåŒæ ·å¯ä»¥è¢«çœç•¥
 */
reversed = names.sort( { $0 > $1 } )    // $0 å’Œ $1 è¡¨ç¤ºé—­åŒ…ä¸­ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªStringç±»å‹çš„å‚æ•°
/*:
    è¿ç®—ç¬¦å‡½æ•°ï¼ˆOperator Functionsï¼‰
 
    Stringç±»å‹å®šä¹‰äº†å…³äºå¤§äºå· (>) çš„å­—ç¬¦ä¸²å®ç°ï¼Œ
    å…¶ä½œä¸ºä¸€ä¸ªå‡½æ•°æ¥å—ä¸¤ä¸ªStringç±»å‹çš„å‚æ•°å¹¶è¿”å›Boolç±»å‹çš„å€¼  
 
    TODO è¿ç®—ç¬¦å‡½æ•°
 */
reversed = names.sort(>)

//: ## 2. å°¾éšé—­åŒ…ï¼ˆTrailing Closuresï¼‰
/*
    å°¾éšé—­åŒ…
    æ˜¯ä¸€ä¸ªä¹¦å†™åœ¨å‡½æ•°æ‹¬å·ä¹‹åçš„é—­åŒ…è¡¨è¾¾å¼ï¼Œå‡½æ•°æ”¯æŒå°†å…¶ä½œä¸ºæœ€åä¸€ä¸ªå‚æ•°è°ƒç”¨
 */
func someFunctionThatTakesAClosure(closure: () -> Void) {
    // å‡½æ•°ä½“éƒ¨åˆ†
}

// ä»¥ä¸‹æ˜¯ ä¸ä½¿ç”¨ å°¾éšé—­åŒ…è¿›è¡Œå‡½æ•°è°ƒç”¨
someFunctionThatTakesAClosure({
    // é—­åŒ…ä¸»ä½“éƒ¨åˆ†
})

// ä»¥ä¸‹æ˜¯ ä½¿ç”¨ å°¾éšé—­åŒ…è¿›è¡Œå‡½æ•°è°ƒç”¨
someFunctionThatTakesAClosure() {
    // é—­åŒ…ä¸»ä½“éƒ¨åˆ†
}
/*:
    æ³¨æ„ï¼š 
    å¦‚æœå‡½æ•°åªéœ€è¦é—­åŒ…è¡¨è¾¾å¼ä¸€ä¸ªå‚æ•°ï¼Œå½“æ‚¨ä½¿ç”¨å°¾éšé—­åŒ…æ—¶ï¼Œæ‚¨ç”šè‡³å¯ä»¥æŠŠ()çœç•¥æ‰ã€‚
    
    åœ¨ä¸Šä¾‹ä¸­ä½œä¸ºsortedå‡½æ•°å‚æ•°çš„å­—ç¬¦ä¸²æ’åºé—­åŒ…å¯ä»¥æ”¹å†™ä¸ºï¼š
 */
reversed = names.sort() { $0 > $1 }
/*:
    åœ¨ map æ–¹æ³•ä¸­ä½¿ç”¨ å°¾éšé—­åŒ… å°†Intç±»å‹æ•°ç»„[16,58,510]
    è½¬æ¢ä¸ºåŒ…å«å¯¹åº”Stringç±»å‹çš„æ•°ç»„["OneSix", "FiveEight", "FiveOneZero"]:
 */
let digitNames = [ // å­—å…¸
    0: "Zero", 1: "One", 2: "Two",   3: "Three", 4: "Four",
    5: "Five", 6: "Six", 7: "Seven", 8: "Eight", 9: "Nine"
]
let numbers = [16, 58, 510]
let strings = numbers.map {     // map æ¥æ”¶ä¸€ä¸ª å°¾éšé—­åŒ…è¡¨è¾¾å¼
    (var number) -> String in
    var output = ""
    while number > 0 {
        output = digitNames[number % 10]! + output  // å­—å…¸ä¸‹æ ‡è¿”å›ä¸€ä¸ªå¯é€‰å€¼ (optional value)
        number /= 10  // ç›´åˆ°number /= 10ä¸º0
    }
    return output
}

//: ## 3. å€¼æ•è·ï¼ˆCapturing Valuesï¼‰
/*:
    é—­åŒ…å¯ä»¥åœ¨å…¶å®šä¹‰çš„ä¸Šä¸‹æ–‡ä¸­æ•è·å¸¸é‡æˆ–å˜é‡
    å³ä½¿å®šä¹‰è¿™äº›å¸¸é‡å’Œå˜é‡çš„åŸåŸŸå·²ç»ä¸å­˜åœ¨ï¼Œé—­åŒ…ä»ç„¶å¯ä»¥åœ¨é—­åŒ…å‡½æ•°ä½“å†…å¼•ç”¨å’Œä¿®æ”¹è¿™äº›å€¼
 */
func makeIncrementor(forIncrement amount: Int) -> () -> Int { // è¿”å›å‡½æ•°ç±»å‹ä¸ºï¼š () -> Int
    var runningTotal = 0
    func incrementor() -> Int {
        runningTotal += amount // æ•è·ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡ runningTotal å’Œ amount ï¼Œæ•æ‰äº†å˜é‡å¼•ç”¨ï¼Œ
        return runningTotal
    }
    return incrementor   // makeIncrementor å°† incrementor ä½œä¸º é—­åŒ…è¿”å›
}
let incrementByTen = makeIncrementor(forIncrement: 10)
incrementByTen()
incrementByTen()
incrementByTen()

let incrementBySeven = makeIncrementor(forIncrement: 7)  // incrementBySevne æ•è·äº†ä¸€ä¸ªæ–°çš„runningTotalå˜é‡
incrementBySeven()
// è¿”å›çš„å€¼ä¸º7
incrementByTen()
/*:
    æ³¨æ„ï¼š
    å¦‚æœå°†é—­åŒ…èµ‹å€¼ç»™ä¸€ä¸ªç±»å®ä¾‹çš„å±æ€§ï¼Œå¹¶ä¸”è¯¥é—­åŒ…é€šè¿‡æŒ‡å‘è¯¥å®ä¾‹æˆ–å…¶æˆå‘˜æ¥æ•è·äº†è¯¥å®ä¾‹ï¼Œå°†åˆ›å»ºä¸€ä¸ªåœ¨é—­åŒ…å’Œå®ä¾‹é—´çš„å¼ºå¼•ç”¨ç¯ã€‚
    Swift ä½¿ç”¨æ•è·åˆ—è¡¨æ¥æ‰“ç ´è¿™ç§å¼ºå¼•ç”¨ç¯ã€‚
 */

//: ## 4. é—­åŒ…æ˜¯å¼•ç”¨ç±»å‹ï¼ˆClosures Are Reference Typesï¼‰
/*:
    å‡½æ•° å’Œ é—­åŒ… éƒ½æ˜¯ å¼•ç”¨ç±»å‹
    æ— è®ºå°†å‡½æ•°/é—­åŒ…èµ‹å€¼ç»™ä¸€ä¸ªå¸¸é‡è¿˜æ˜¯å˜é‡ï¼Œå®é™…ä¸Šéƒ½æ˜¯å°†å¸¸é‡/å˜é‡çš„å€¼è®¾ç½®ä¸ºå¯¹åº”å‡½æ•°/é—­åŒ…çš„å¼•ç”¨
 
    è¿™ä¹Ÿæ„å‘³ç€å¦‚æœæ‚¨å°†é—­åŒ…èµ‹å€¼ç»™äº†ä¸¤ä¸ªä¸åŒçš„å¸¸é‡/å˜é‡ï¼Œä¸¤ä¸ªå€¼éƒ½ä¼šæŒ‡å‘åŒä¸€ä¸ªé—­åŒ…ï¼š
 */
let alsoIncrementByTen = incrementByTen
alsoIncrementByTen()


//: [Next](@next)
