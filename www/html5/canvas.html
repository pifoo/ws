<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<title>video</title>
		<meta name="description" content="" />
		<meta name="author" content="hewj" />
		<meta name="viewport" content="width=device-width; initial-scale=1.0" />
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="apple-touch-icon" href="/apple-touch-icon.png" />
		<style>

		</style>
	</head>
	<body>
		<canvas id="MyCanvas" width="600" height="600"> </canvas>
		<script>
			(function draw() {//get the rad of every sort, and 分配每个sort的份额。
				//设置名称和大小
				var data = [{
					"name" : "orange",
					"num" : "450"
				}, {
					"name" : "pear",
					"num" : "560"
				}, {
					"name" : "apple",
					"num" : "90"
				}, {
					"name" : "waterfall",
					"num" : "245"
				}];
				var arr = new Array();
				var num = new Array();
				rad = Math.PI / 180;
				var r = 100;
				s = 0;
				for( i = 0; i < data.length; i++) {
					num[i] = parseFloat(data[i].num);
				}
				for( i = 0; i < data.length; i++) {
					s += num[i];
				}
				a = s / 360;
				for( i = 0; i < data.length; i++) {
					arr[i] = num[i] / a;
				}
				var col = new Array();
				color = ["red", "black", "yellow", "blue", "green"];
				//灵活添加颜料库
				//
				var canvas = document.getElementById("MyCanvas");
				if(canvas.getContext) {
					var ctx = canvas.getContext("2d");
					var nums = new Array();
					var num_m = 0;
					nums[0] = 0;
					var count = 0;
					for( i = 0; i <= data.length; i++) {
						nums[count] = num_m;
						count++;
						num_m += arr[i];
					}
					//draw pie
					for( i = 0; i < data.length; i++) {
						ctx.strokeStyle = color[i];
						ctx.beginPath();
						for( k = nums[i]; k < nums[i + 1]; k++) {
							ctx.moveTo(200, 200);
							ctx.lineTo(r * Math.cos(k * rad) + 200, r * Math.sin(k * rad) + 200);
							ctx.stroke();
						}
						ctx.lineTo(200, 200);
					}
				}

			})()

			//draw();

		</script>
	</body>
</html>
